int buf[2][100];

// sort [l, r)
void merge_sort(int l, int r)
{
    if (l + 1 >= r)
        return;

    int mid = (l + r) / 2;
    merge_sort(l, mid);
    merge_sort(mid, r);

    int i = l, j = mid, k = l;
    while (i < mid && j < r) {
        if (buf[0][i] < buf[0][j]) {
            buf[1][k] = buf[0][i];
            i = i + 1;
        } else {
            buf[1][k] = buf[0][j];
            j = j + 1;
        }
        k = k + 1;
    }
    while (i < mid) {
        buf[1][k] = buf[0][i];
        i = i + 1;
        k = k + 1;
    }
    while (j < r) {
        buf[1][k] = buf[0][j];
        j = j + 1;
        k = k + 1;
    }

    while (l < r) {
        buf[0][l] = buf[1][l];
        l = l + 1;
    }
}

int main()
{
    int n = getarray(buf[0]);
    merge_sort(0, n);
    putarray(n, buf[0]);
    return 0;
}

input_file: test_2021/067_sort_test7.sy
line 1, col 1, TOKEN_INT
line 1, col 5, TOKEN_IDENTIFIER, buf
line 1, col 8, TOKEN_LEFT_BRACKETS
line 1, col 9, TOKEN_INTEGER, 2
line 1, col 10, TOKEN_RIGHT_BRACKETS
line 1, col 11, TOKEN_LEFT_BRACKETS
line 1, col 12, TOKEN_INTEGER, 100
line 1, col 15, TOKEN_RIGHT_BRACKETS
line 1, col 16, TOKEN_SEMICOLON
line 4, col 1, TOKEN_VOID
line 4, col 6, TOKEN_IDENTIFIER, merge_sort
line 4, col 16, TOKEN_LEFT_PARENTHESES
line 4, col 17, TOKEN_INT
line 4, col 21, TOKEN_IDENTIFIER, l
line 4, col 22, TOKEN_COMMA
line 4, col 24, TOKEN_INT
line 4, col 28, TOKEN_IDENTIFIER, r
line 4, col 29, TOKEN_RIGHT_PARENTHESES
line 5, col 1, TOKEN_LEFT_BRACES
line 6, col 5, TOKEN_IF
line 6, col 8, TOKEN_LEFT_PARENTHESES
line 6, col 9, TOKEN_IDENTIFIER, l
line 6, col 11, TOKEN_ADD
line 6, col 13, TOKEN_INTEGER, 1
line 6, col 15, TOKEN_GTE
line 6, col 18, TOKEN_IDENTIFIER, r
line 6, col 19, TOKEN_RIGHT_PARENTHESES
line 7, col 9, TOKEN_RETURN
line 7, col 15, TOKEN_SEMICOLON
line 9, col 5, TOKEN_INT
line 9, col 9, TOKEN_IDENTIFIER, mid
line 9, col 13, TOKEN_ASSIGN
line 9, col 15, TOKEN_LEFT_PARENTHESES
line 9, col 16, TOKEN_IDENTIFIER, l
line 9, col 18, TOKEN_ADD
line 9, col 20, TOKEN_IDENTIFIER, r
line 9, col 21, TOKEN_RIGHT_PARENTHESES
line 9, col 23, TOKEN_DIV
line 9, col 25, TOKEN_INTEGER, 2
line 9, col 26, TOKEN_SEMICOLON
line 10, col 5, TOKEN_IDENTIFIER, merge_sort
line 10, col 15, TOKEN_LEFT_PARENTHESES
line 10, col 16, TOKEN_IDENTIFIER, l
line 10, col 17, TOKEN_COMMA
line 10, col 19, TOKEN_IDENTIFIER, mid
line 10, col 22, TOKEN_RIGHT_PARENTHESES
line 10, col 23, TOKEN_SEMICOLON
line 11, col 5, TOKEN_IDENTIFIER, merge_sort
line 11, col 15, TOKEN_LEFT_PARENTHESES
line 11, col 16, TOKEN_IDENTIFIER, mid
line 11, col 19, TOKEN_COMMA
line 11, col 21, TOKEN_IDENTIFIER, r
line 11, col 22, TOKEN_RIGHT_PARENTHESES
line 11, col 23, TOKEN_SEMICOLON
line 13, col 5, TOKEN_INT
line 13, col 9, TOKEN_IDENTIFIER, i
line 13, col 11, TOKEN_ASSIGN
line 13, col 13, TOKEN_IDENTIFIER, l
line 13, col 14, TOKEN_COMMA
line 13, col 16, TOKEN_IDENTIFIER, j
line 13, col 18, TOKEN_ASSIGN
line 13, col 20, TOKEN_IDENTIFIER, mid
line 13, col 23, TOKEN_COMMA
line 13, col 25, TOKEN_IDENTIFIER, k
line 13, col 27, TOKEN_ASSIGN
line 13, col 29, TOKEN_IDENTIFIER, l
line 13, col 30, TOKEN_SEMICOLON
line 14, col 5, TOKEN_WHILE
line 14, col 11, TOKEN_LEFT_PARENTHESES
line 14, col 12, TOKEN_IDENTIFIER, i
line 14, col 14, TOKEN_LT
line 14, col 16, TOKEN_IDENTIFIER, mid
line 14, col 20, TOKEN_AND
line 14, col 23, TOKEN_IDENTIFIER, j
line 14, col 25, TOKEN_LT
line 14, col 27, TOKEN_IDENTIFIER, r
line 14, col 28, TOKEN_RIGHT_PARENTHESES
line 14, col 30, TOKEN_LEFT_BRACES
line 15, col 9, TOKEN_IF
line 15, col 12, TOKEN_LEFT_PARENTHESES
line 15, col 13, TOKEN_IDENTIFIER, buf
line 15, col 16, TOKEN_LEFT_BRACKETS
line 15, col 17, TOKEN_INTEGER, 0
line 15, col 18, TOKEN_RIGHT_BRACKETS
line 15, col 19, TOKEN_LEFT_BRACKETS
line 15, col 20, TOKEN_IDENTIFIER, i
line 15, col 21, TOKEN_RIGHT_BRACKETS
line 15, col 23, TOKEN_LT
line 15, col 25, TOKEN_IDENTIFIER, buf
line 15, col 28, TOKEN_LEFT_BRACKETS
line 15, col 29, TOKEN_INTEGER, 0
line 15, col 30, TOKEN_RIGHT_BRACKETS
line 15, col 31, TOKEN_LEFT_BRACKETS
line 15, col 32, TOKEN_IDENTIFIER, j
line 15, col 33, TOKEN_RIGHT_BRACKETS
line 15, col 34, TOKEN_RIGHT_PARENTHESES
line 15, col 36, TOKEN_LEFT_BRACES
line 16, col 13, TOKEN_IDENTIFIER, buf
line 16, col 16, TOKEN_LEFT_BRACKETS
line 16, col 17, TOKEN_INTEGER, 1
line 16, col 18, TOKEN_RIGHT_BRACKETS
line 16, col 19, TOKEN_LEFT_BRACKETS
line 16, col 20, TOKEN_IDENTIFIER, k
line 16, col 21, TOKEN_RIGHT_BRACKETS
line 16, col 23, TOKEN_ASSIGN
line 16, col 25, TOKEN_IDENTIFIER, buf
line 16, col 28, TOKEN_LEFT_BRACKETS
line 16, col 29, TOKEN_INTEGER, 0
line 16, col 30, TOKEN_RIGHT_BRACKETS
line 16, col 31, TOKEN_LEFT_BRACKETS
line 16, col 32, TOKEN_IDENTIFIER, i
line 16, col 33, TOKEN_RIGHT_BRACKETS
line 16, col 34, TOKEN_SEMICOLON
line 17, col 13, TOKEN_IDENTIFIER, i
line 17, col 15, TOKEN_ASSIGN
line 17, col 17, TOKEN_IDENTIFIER, i
line 17, col 19, TOKEN_ADD
line 17, col 21, TOKEN_INTEGER, 1
line 17, col 22, TOKEN_SEMICOLON
line 18, col 9, TOKEN_RIGHT_BRACES
line 18, col 11, TOKEN_ELSE
line 18, col 16, TOKEN_LEFT_BRACES
line 19, col 13, TOKEN_IDENTIFIER, buf
line 19, col 16, TOKEN_LEFT_BRACKETS
line 19, col 17, TOKEN_INTEGER, 1
line 19, col 18, TOKEN_RIGHT_BRACKETS
line 19, col 19, TOKEN_LEFT_BRACKETS
line 19, col 20, TOKEN_IDENTIFIER, k
line 19, col 21, TOKEN_RIGHT_BRACKETS
line 19, col 23, TOKEN_ASSIGN
line 19, col 25, TOKEN_IDENTIFIER, buf
line 19, col 28, TOKEN_LEFT_BRACKETS
line 19, col 29, TOKEN_INTEGER, 0
line 19, col 30, TOKEN_RIGHT_BRACKETS
line 19, col 31, TOKEN_LEFT_BRACKETS
line 19, col 32, TOKEN_IDENTIFIER, j
line 19, col 33, TOKEN_RIGHT_BRACKETS
line 19, col 34, TOKEN_SEMICOLON
line 20, col 13, TOKEN_IDENTIFIER, j
line 20, col 15, TOKEN_ASSIGN
line 20, col 17, TOKEN_IDENTIFIER, j
line 20, col 19, TOKEN_ADD
line 20, col 21, TOKEN_INTEGER, 1
line 20, col 22, TOKEN_SEMICOLON
line 21, col 9, TOKEN_RIGHT_BRACES
line 22, col 9, TOKEN_IDENTIFIER, k
line 22, col 11, TOKEN_ASSIGN
line 22, col 13, TOKEN_IDENTIFIER, k
line 22, col 15, TOKEN_ADD
line 22, col 17, TOKEN_INTEGER, 1
line 22, col 18, TOKEN_SEMICOLON
line 23, col 5, TOKEN_RIGHT_BRACES
line 24, col 5, TOKEN_WHILE
line 24, col 11, TOKEN_LEFT_PARENTHESES
line 24, col 12, TOKEN_IDENTIFIER, i
line 24, col 14, TOKEN_LT
line 24, col 16, TOKEN_IDENTIFIER, mid
line 24, col 19, TOKEN_RIGHT_PARENTHESES
line 24, col 21, TOKEN_LEFT_BRACES
line 25, col 9, TOKEN_IDENTIFIER, buf
line 25, col 12, TOKEN_LEFT_BRACKETS
line 25, col 13, TOKEN_INTEGER, 1
line 25, col 14, TOKEN_RIGHT_BRACKETS
line 25, col 15, TOKEN_LEFT_BRACKETS
line 25, col 16, TOKEN_IDENTIFIER, k
line 25, col 17, TOKEN_RIGHT_BRACKETS
line 25, col 19, TOKEN_ASSIGN
line 25, col 21, TOKEN_IDENTIFIER, buf
line 25, col 24, TOKEN_LEFT_BRACKETS
line 25, col 25, TOKEN_INTEGER, 0
line 25, col 26, TOKEN_RIGHT_BRACKETS
line 25, col 27, TOKEN_LEFT_BRACKETS
line 25, col 28, TOKEN_IDENTIFIER, i
line 25, col 29, TOKEN_RIGHT_BRACKETS
line 25, col 30, TOKEN_SEMICOLON
line 26, col 9, TOKEN_IDENTIFIER, i
line 26, col 11, TOKEN_ASSIGN
line 26, col 13, TOKEN_IDENTIFIER, i
line 26, col 15, TOKEN_ADD
line 26, col 17, TOKEN_INTEGER, 1
line 26, col 18, TOKEN_SEMICOLON
line 27, col 9, TOKEN_IDENTIFIER, k
line 27, col 11, TOKEN_ASSIGN
line 27, col 13, TOKEN_IDENTIFIER, k
line 27, col 15, TOKEN_ADD
line 27, col 17, TOKEN_INTEGER, 1
line 27, col 18, TOKEN_SEMICOLON
line 28, col 5, TOKEN_RIGHT_BRACES
line 29, col 5, TOKEN_WHILE
line 29, col 11, TOKEN_LEFT_PARENTHESES
line 29, col 12, TOKEN_IDENTIFIER, j
line 29, col 14, TOKEN_LT
line 29, col 16, TOKEN_IDENTIFIER, r
line 29, col 17, TOKEN_RIGHT_PARENTHESES
line 29, col 19, TOKEN_LEFT_BRACES
line 30, col 9, TOKEN_IDENTIFIER, buf
line 30, col 12, TOKEN_LEFT_BRACKETS
line 30, col 13, TOKEN_INTEGER, 1
line 30, col 14, TOKEN_RIGHT_BRACKETS
line 30, col 15, TOKEN_LEFT_BRACKETS
line 30, col 16, TOKEN_IDENTIFIER, k
line 30, col 17, TOKEN_RIGHT_BRACKETS
line 30, col 19, TOKEN_ASSIGN
line 30, col 21, TOKEN_IDENTIFIER, buf
line 30, col 24, TOKEN_LEFT_BRACKETS
line 30, col 25, TOKEN_INTEGER, 0
line 30, col 26, TOKEN_RIGHT_BRACKETS
line 30, col 27, TOKEN_LEFT_BRACKETS
line 30, col 28, TOKEN_IDENTIFIER, j
line 30, col 29, TOKEN_RIGHT_BRACKETS
line 30, col 30, TOKEN_SEMICOLON
line 31, col 9, TOKEN_IDENTIFIER, j
line 31, col 11, TOKEN_ASSIGN
line 31, col 13, TOKEN_IDENTIFIER, j
line 31, col 15, TOKEN_ADD
line 31, col 17, TOKEN_INTEGER, 1
line 31, col 18, TOKEN_SEMICOLON
line 32, col 9, TOKEN_IDENTIFIER, k
line 32, col 11, TOKEN_ASSIGN
line 32, col 13, TOKEN_IDENTIFIER, k
line 32, col 15, TOKEN_ADD
line 32, col 17, TOKEN_INTEGER, 1
line 32, col 18, TOKEN_SEMICOLON
line 33, col 5, TOKEN_RIGHT_BRACES
line 35, col 5, TOKEN_WHILE
line 35, col 11, TOKEN_LEFT_PARENTHESES
line 35, col 12, TOKEN_IDENTIFIER, l
line 35, col 14, TOKEN_LT
line 35, col 16, TOKEN_IDENTIFIER, r
line 35, col 17, TOKEN_RIGHT_PARENTHESES
line 35, col 19, TOKEN_LEFT_BRACES
line 36, col 9, TOKEN_IDENTIFIER, buf
line 36, col 12, TOKEN_LEFT_BRACKETS
line 36, col 13, TOKEN_INTEGER, 0
line 36, col 14, TOKEN_RIGHT_BRACKETS
line 36, col 15, TOKEN_LEFT_BRACKETS
line 36, col 16, TOKEN_IDENTIFIER, l
line 36, col 17, TOKEN_RIGHT_BRACKETS
line 36, col 19, TOKEN_ASSIGN
line 36, col 21, TOKEN_IDENTIFIER, buf
line 36, col 24, TOKEN_LEFT_BRACKETS
line 36, col 25, TOKEN_INTEGER, 1
line 36, col 26, TOKEN_RIGHT_BRACKETS
line 36, col 27, TOKEN_LEFT_BRACKETS
line 36, col 28, TOKEN_IDENTIFIER, l
line 36, col 29, TOKEN_RIGHT_BRACKETS
line 36, col 30, TOKEN_SEMICOLON
line 37, col 9, TOKEN_IDENTIFIER, l
line 37, col 11, TOKEN_ASSIGN
line 37, col 13, TOKEN_IDENTIFIER, l
line 37, col 15, TOKEN_ADD
line 37, col 17, TOKEN_INTEGER, 1
line 37, col 18, TOKEN_SEMICOLON
line 38, col 5, TOKEN_RIGHT_BRACES
line 39, col 1, TOKEN_RIGHT_BRACES
line 41, col 1, TOKEN_INT
line 41, col 5, TOKEN_IDENTIFIER, main
line 41, col 9, TOKEN_LEFT_PARENTHESES
line 41, col 10, TOKEN_RIGHT_PARENTHESES
line 42, col 1, TOKEN_LEFT_BRACES
line 43, col 5, TOKEN_INT
line 43, col 9, TOKEN_IDENTIFIER, n
line 43, col 11, TOKEN_ASSIGN
line 43, col 13, TOKEN_IDENTIFIER, getarray
line 43, col 21, TOKEN_LEFT_PARENTHESES
line 43, col 22, TOKEN_IDENTIFIER, buf
line 43, col 25, TOKEN_LEFT_BRACKETS
line 43, col 26, TOKEN_INTEGER, 0
line 43, col 27, TOKEN_RIGHT_BRACKETS
line 43, col 28, TOKEN_RIGHT_PARENTHESES
line 43, col 29, TOKEN_SEMICOLON
line 44, col 5, TOKEN_IDENTIFIER, merge_sort
line 44, col 15, TOKEN_LEFT_PARENTHESES
line 44, col 16, TOKEN_INTEGER, 0
line 44, col 17, TOKEN_COMMA
line 44, col 19, TOKEN_IDENTIFIER, n
line 44, col 20, TOKEN_RIGHT_PARENTHESES
line 44, col 21, TOKEN_SEMICOLON
line 45, col 5, TOKEN_IDENTIFIER, putarray
line 45, col 13, TOKEN_LEFT_PARENTHESES
line 45, col 14, TOKEN_IDENTIFIER, n
line 45, col 15, TOKEN_COMMA
line 45, col 17, TOKEN_IDENTIFIER, buf
line 45, col 20, TOKEN_LEFT_BRACKETS
line 45, col 21, TOKEN_INTEGER, 0
line 45, col 22, TOKEN_RIGHT_BRACKETS
line 45, col 23, TOKEN_RIGHT_PARENTHESES
line 45, col 24, TOKEN_SEMICOLON
line 46, col 5, TOKEN_RETURN
line 46, col 12, TOKEN_INTEGER, 0
line 46, col 13, TOKEN_SEMICOLON
line 47, col 1, TOKEN_RIGHT_BRACES
